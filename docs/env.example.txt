# ============================================================================
# ARCHIVO DE EJEMPLO - VARIABLES DE ENTORNO PARA UDID SERVER
# ============================================================================
# INSTRUCCIONES:
# 1. Copiar este archivo a .env en la raíz del proyecto: cp docs/env.example.txt .env
# 2. Editar .env y reemplazar todos los valores de ejemplo con valores reales
# 3. NUNCA subir .env a control de versiones
# ============================================================================

# ============================================================================
# CONFIGURACIÓN DJANGO
# ============================================================================

# Clave secreta de Django (GENERAR UNA NUEVA Y ÚNICA)
# Generar con: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=CAMBIAR_POR_CLAVE_SECRETA_GENERADA

# Modo debug (SIEMPRE False en producción)
DEBUG=False

# Hosts permitidos (separados por coma, sin espacios)
# Incluir: IP del servidor, localhost, y dominio si tienes uno
ALLOWED_HOSTS=127.0.0.1,localhost,tu.dominio.com,IP_DEL_SERVIDOR

# ============================================================================
# BASE DE DATOS POSTGRESQL
# ============================================================================

POSTGRES_DB=udid
POSTGRES_USER=udid_user
POSTGRES_PASSWORD=CAMBIAR_POR_PASSWORD_POSTGRESQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# ============================================================================
# REDIS
# ============================================================================

# URL principal de Redis
REDIS_URL=redis://localhost:6379/0

# URL para Channel Layers (WebSockets)
REDIS_CHANNEL_LAYER_URL=redis://localhost:6379/0

# URL para Rate Limiting (puede ser otra DB de Redis)
REDIS_RATE_LIMIT_URL=redis://localhost:6379/1

# Configuración de conexión Redis
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=True
REDIS_MAX_CONNECTIONS=100

# ============================================================================
# PANACCESS (API Externa)
# ============================================================================

# URL de la API de Panaccess
url_panaccess=https://CAMBIAR_URL_PANACCESS/api

# Credenciales de Panaccess
username=CAMBIAR_USUARIO_PANACCESS
password=CAMBIAR_PASSWORD_PANACCESS
api_token=CAMBIAR_API_TOKEN_PANACCESS
salt=CAMBIAR_SALT_PANACCESS

# Clave de encriptación (DEBE SER DE 32 CARACTERES para AES-256)
ENCRYPTION_KEY=CAMBIAR_CLAVE_32_CARACTERES_____

# ============================================================================
# CORS Y SEGURIDAD
# ============================================================================

# Orígenes permitidos para CORS (URLs completas, separadas por coma)
CORS_ALLOWED_ORIGINS=https://tu-frontend.com,https://app.tu-dominio.com

# Orígenes WebSocket permitidos
WS_ALLOWED_ORIGINS=https://tu-frontend.com,wss://tu-frontend.com

# CSRF trusted origins (para formularios)
CSRF_TRUSTED_ORIGINS=https://tu.dominio.com,https://IP_DEL_SERVIDOR

# ============================================================================
# CONFIGURACIÓN DEL SERVIDOR
# ============================================================================

# Host donde escucha Daphne (127.0.0.1 porque Nginx hace proxy)
SERVER_HOST=127.0.0.1
SERVER_PORT=8000

# ============================================================================
# CONFIGURACIÓN DE UDID
# ============================================================================

# Tiempo de expiración de UDID en minutos (default: 15)
UDID_EXPIRATION_MINUTES=15

# Máximo de intentos de validación (default: 5)
UDID_MAX_ATTEMPTS=5

# Timeouts de WebSocket en segundos
UDID_WAIT_TIMEOUT_AUTOMATIC=180
UDID_WAIT_TIMEOUT_MANUAL=180

# Máximo de conexiones WebSocket por token
UDID_WS_MAX_PER_TOKEN=1

# ============================================================================
# CONFIGURACIÓN DE JWT
# ============================================================================

# Tiempo de vida del access token en minutos
JWT_ACCESS_TOKEN_LIFETIME_MINUTES=15

# Tiempo de vida del refresh token en días
JWT_REFRESH_TOKEN_LIFETIME_DAYS=1

# Rotación de tokens
JWT_ROTATE_REFRESH_TOKENS=True
JWT_BLACKLIST_AFTER_ROTATION=True

# ============================================================================
# CONFIGURACIÓN DE CACHE
# ============================================================================

# Prefijo para claves de cache (único por ambiente)
CACHE_KEY_PREFIX=udid_prod

# Timeout de cache en segundos
CACHE_TIMEOUT=300

# Timeouts de conexión de cache
CACHE_SOCKET_CONNECT_TIMEOUT=5
CACHE_SOCKET_TIMEOUT=5

# ============================================================================
# CONFIGURACIÓN DE CHANNEL LAYERS
# ============================================================================

# Capacidad de canales (mensajes en cola)
CHANNEL_LAYERS_CAPACITY=2000

# Tiempo de expiración de mensajes en segundos
CHANNEL_LAYERS_EXPIRY=10

# Tiempo de expiración de grupos en segundos
CHANNEL_LAYERS_GROUP_EXPIRY=900

# ============================================================================
# CONFIGURACIÓN DE DEGRADACIÓN Y CARGA
# ============================================================================

# Slots de concurrencia global
GLOBAL_SEMAPHORE_SLOTS=1000

# Cola de requests
REQUEST_QUEUE_MAX_SIZE=1000
REQUEST_QUEUE_MAX_WAIT_TIME=10

# Umbrales de degradación
DEGRADATION_BASELINE_LOAD=100
DEGRADATION_MEDIUM_THRESHOLD=1.5
DEGRADATION_HIGH_THRESHOLD=2.0
DEGRADATION_CRITICAL_THRESHOLD=3.0

# Circuit breaker Redis
REDIS_CIRCUIT_BREAKER_THRESHOLD=10
REDIS_CIRCUIT_BREAKER_TIMEOUT=30

# ============================================================================
# CONFIGURACIÓN DE REST FRAMEWORK
# ============================================================================

# Tamaño de página para paginación
REST_FRAMEWORK_PAGE_SIZE=100

# ============================================================================
# REDIS SENTINEL (OPCIONAL - Solo para alta disponibilidad)
# ============================================================================

# Configuración de Sentinel (dejar vacío si no se usa)
# Formato: host1:puerto1,host2:puerto2,host3:puerto3
# REDIS_SENTINEL=192.168.1.1:26379,192.168.1.2:26379,192.168.1.3:26379
# REDIS_SENTINEL_MASTER=mymaster



